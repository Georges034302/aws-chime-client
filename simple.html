<!DOCTYPE html>
<html>
<head><title>AWS Chime v4.0</title></head>
<body>
<h1>AWS Chime Client v4.0</h1>
<p id="status">Not logged in</p>
<button id="login">Login</button>
<button id="logout" style="display:none">Logout</button>
<script>
const domain = "chime-client-1764319994-19362";
const clientId = "771598hr3p7fm4j9990585r63f";
const redirectUri = "https://georges034302.github.io/aws-chime-client/";

function login() {
  window.location.href = "https://" + domain + ".auth.ap-southeast-2.amazoncognito.com/login?client_id=" + clientId + "&response_type=token&scope=openid+profile+email&redirect_uri=" + encodeURIComponent(redirectUri);
}

function logout() {
  window.location.href = "https://" + domain + ".auth.ap-southeast-2.amazoncognito.com/logout?client_id=" + clientId + "&logout_uri=" + encodeURIComponent(redirectUri);
}

function parseToken() {
  const hash = window.location.hash.substring(1);
  if (hash && hash.indexOf("id_token=") > -1) {
    document.getElementById("status").textContent = "âœ… Logged in!";
    document.getElementById("login").style.display = "none";
    document.getElementById("logout").style.display = "inline";
    window.location.hash = "";
  }
}

document.getElementById("login").onclick = login;
document.getElementById("logout").onclick = logout;
parseToken();
</script>
</body>
</html>